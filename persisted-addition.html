<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link  rel="stylesheet" href="style.css">
    <title>Add and Summarize Numbers</title>
</head>
<body>
<div class="container">
    <h1>Add a Number and Summarize Them</h1>
    <p>Enter a number below. The calculator will correctly summarize the numbers.</p>
    <p><strong>Bonus improvement:</strong> Prevents adding invalid inputs.</p>

    <label for="numberInput" class="visually-hidden">Enter an integer</label>
    <input type="text" id="numberInput" placeholder="Enter an integer">
    <button id="addButton">Add Number</button>

    <div class="list">
        <div id="numberList"></div>
        =
        <h3><span id="totalSum">0</span></h3>
    </div>
</div>

<script>
  const numberInput = document.getElementById('numberInput');
  const addButton = document.getElementById('addButton');
  const numberList = document.getElementById('numberList');
  const totalSum = document.getElementById('totalSum');

  // let enteredNumbers = [];
  // let sum = 0;

  function updateNumbers(newNumber){
    // Read existing numbers from localStorage
    let stored = JSON.parse(localStorage.getItem('numbers')) || [];

    //Add new number if provided
    if(newNumber !=null) {
      stored.push(newNumber);
      localStorage.setItem('numbers', JSON.stringify(stored));
    }

    //Calculate sum
    const sum = stored.reduce((acc,n) => acc + n, 0 );

    // Format numbers for display: negatives get parentheses
    const formatted = stored.map(n => (n < 0 ? `(${n})` : n));

    numberList.textContent = formatted.join(' + ');
    totalSum.textContent = sum;

    return {stored , sum } //for unit testing

  }

  addButton.addEventListener('click', function () {
    const number = numberInput.value.trim();

    // Check if input is a valid integer (no decimals, no empty input)
    if (!/^-?\d+$/.test(number)) {
      alert('Please enter a valid integer.');
      return;
    }

    const numValue = parseInt(number, 10);
    // enteredNumbers.push(numValue);
    // sum += numValue;
    // numberList.textContent = enteredNumbers.join(' + ');
    // totalSum.textContent = sum;
    updateNumbers(numValue);

    numberInput.value = '';
    numberInput.focus();
  });

  // ---------- Initialize UI on Load ----------
  document.addEventListener('DOMContentLoaded', () => {
    updateNumbers(); // populate UI from persisted values
  });
</script>
</body>
</html>
